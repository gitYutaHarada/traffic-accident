ｘ# Stage 1 Recall設定比較レポート: 99% vs 95%

## 概要
Two-Stage PipelineのStage 1（候補生成・粗選別）において、目標Recallを**99%**に設定した場合と**95%**に設定した場合のパフォーマンス差異を比較・分析しました。

## 比較結果サマリ

| 指標 | Recall 99%設定 (Baseline) | Recall 95%設定 (今回実験) | 変化率 / 効果 |
| :--- | :--- | :--- | :--- |
| **Recall (補足率)** | **99.0%** | **95.06%** | -3.94 pt (Trade-off) |
| **Threshold (閾値)** | ~0.040 | **0.1160** | 閾値を厳しく設定可能 |
| **Filter Rate (除外率)** | ~25.0% | **56.32%** | **+31.32 pt (改善)** |
| **Residual Data (残存率)** | ~75.0% | **43.68%** | **データ量が約半分に減少** |
| **Stage 2 Positive Rate** | ~1.1% | **1.87%** | 正例含有率が向上 |

## 詳細分析

### 1. フィルタリング効率の劇的な向上
Recallを99%から95%へ **わずか4%** 緩和するだけで、フィルタリング率（安全と判定して捨てる割合）は **25%から56%へと倍増** しました。
これにより、Stage 2（高コストな精密モデル）に投入されるデータ量を **約75%から約44%へ、4割以上削減** できます。システム全体の計算コストと推論速度に大きく貢献します。

### 2. Stage 2 への影響 (Positive Rate改善)
Stage 1で大量の「明らかな負例」を除去できたことで、Stage 2の学習データにおける**正例（死亡事故）の割合が約1.1%から1.87%へ向上**しました。
不均衡データ問題が緩和されるため、Stage 2のモデル（Focal Loss等）は、より「難易度の高い識別（Hard Negative Mining）」に集中できるようになり、結果としてPrecision（適合率）の向上が期待できます。

### 3. トレードオフの評価
*   **リスク**: 死亡事故全体の **約4%**（今回のデータセットでは約400〜500件）がStage 1の時点で「安全」と判定され、**検出不可能（False Negative）** になります。
*   **メリット**: その代償として、**圧倒的なFalse Positive（誤検知）の削減** と **処理の高速化** が得られます。

## 結論と推奨

| シナリオ | 推奨設定 | 理由 |
| :--- | :--- | :--- |
| **人命最優先 / 見逃し厳禁** | **Recall 99%** | コスト度外視で、可能性のある事故は全て拾う必要がある場合。Stage 2の負担は大きい。 |
| **実用バランス / 予警報システム** | **Recall 95%** | **推奨**。4%の見逃しは許容し、誤報（オオカミ少年）を減らしてシステムの実用性・信頼性を高める設定。 |

今回の実験結果（Stage 2でFocal LossがAUC 0.8268を記録）を踏まえると、**Recall 95%設定の方がStage 2とのシナジーが高く、トータルとしての予測精度（F1スコアやPrecision）は高くなる** と判断されます。
