# 特徴量選択レポート

**実行日時**: 2025-12-19 14:57:06

---

## 設定

| 項目 | 値 |
|------|-----|
| 評価指標 | LogLoss |
| Permutation Importance 繰り返し回数 | 5 |
| ノイズ判定閾値 | importance <= 0.0 |
| 相関係数閾値 | > 0.95 |
| 削除禁止リスト | prob_stage1, logits_stage1, area_id |

---

## ベースラインモデル

- **LogLoss**: 0.144899

---

## Permutation Importance（順列重要度）

検証データで各特徴量をシャッフルし、LogLossの悪化度合いを測定しました。
値が大きいほど重要、0以下はシャッフルしても精度が変わらない（ノイズ）。

### 上位10特徴量（重要）

| 特徴量 | Importance (LogLoss悪化量) | Std |
|--------|---------------------------|-----|
| 速度規制（指定のみ）（当事者B） | 0.019837 | 0.000642 |
| 当事者種別（当事者A） | 0.004400 | 0.000150 |
| 一時停止規制　標識（当事者B） | 0.003070 | 0.000517 |
| area_id | 0.002369 | 0.000567 |
| 警察署等コード | 0.000581 | 0.000099 |
| 都道府県コード | 0.000006 | 0.000079 |
| ゾーン規制 | 0.000000 | 0.000000 |
| 一時停止規制　標識（当事者A） | 0.000000 | 0.000000 |
| 一時停止規制　表示（当事者A） | 0.000000 | 0.000000 |
| 信号機 | 0.000000 | 0.000000 |

### 下位10特徴量（削除候補）

| 特徴量 | Importance (LogLoss悪化量) | Std | 削除推奨 |
|--------|---------------------------|-----|----------|
| 地形 | -0.004361 | 0.000229 | ✅ 推奨 |
| 昼夜 | -0.002676 | 0.000199 | ✅ 推奨 |
| 車道幅員 | -0.001067 | 0.000047 | ✅ 推奨 |
| hour | -0.001018 | 0.000305 | ✅ 推奨 |
| 道路線形 | -0.000937 | 0.000118 | ✅ 推奨 |
| 中央分離帯施設等 | -0.000572 | 0.000099 | ✅ 推奨 |
| 道路形状 | -0.000329 | 0.000159 | ✅ 推奨 |
| 地点コード | -0.000041 | 0.000021 | ✅ 推奨 |
| 祝日(発生年月日) | 0.000000 | 0.000000 | ✅ 推奨 |
| 衝突地点 | 0.000000 | 0.000000 | ✅ 推奨 |

### ノイズ候補一覧（importance <= 0.0）

> [!WARNING]
> 以下の特徴量は削除を検討してください。

- `ゾーン規制`: 0.000000
- `一時停止規制　標識（当事者A）`: 0.000000
- `一時停止規制　表示（当事者A）`: 0.000000
- `信号機`: 0.000000
- `一時停止規制　表示（当事者B）`: 0.000000
- `曜日(発生年月日)`: 0.000000
- `歩車道区分`: 0.000000
- `用途別（当事者A）`: 0.000000
- `年齢（当事者A）`: 0.000000
- `地点　緯度（北緯）`: 0.000000
- `市区町村コード`: 0.000000
- `天候`: 0.000000
- `地点　経度（東経）`: 0.000000
- `day`: 0.000000
- `month`: 0.000000
- `road_type`: 0.000000
- `year`: 0.000000
- `路面状態`: 0.000000
- `速度規制（指定のみ）（当事者A）`: 0.000000
- `衝突地点`: 0.000000
- `祝日(発生年月日)`: 0.000000
- `地点コード`: -0.000041
- `道路形状`: -0.000329
- `中央分離帯施設等`: -0.000572
- `道路線形`: -0.000937
- `hour`: -0.001018
- `車道幅員`: -0.001067
- `昼夜`: -0.002676
- `地形`: -0.004361

---

## 多重共線性（相関行列）

**対象**: 数値変数のみ（カテゴリ変数はPearson相関が無意味なため除外）

### スキップした列（カテゴリ変数）

- `ゾーン規制`
- `中央分離帯施設等`
- `信号機`
- `地形`
- `地点コード`
- `天候`
- `市区町村コード`
- `昼夜`
- `曜日(発生年月日)`
- `歩車道区分`
- `祝日(発生年月日)`
- `衝突地点`
- `警察署等コード`
- `路面状態`
- `道路形状`
- `都道府県コード`
- `road_type`
- `area_id`

### 高相関ペア（相関係数 > 0.95）

高相関ペアはありませんでした。

---

## 推奨アクション

1. **ノイズ候補の削除**: 上記のノイズ候補リストから、ドメイン知識に基づいて削除する列を決定してください。
2. **高相関ペアの整理**: 高相関ペアがある場合、片方を削除するか、主成分分析（PCA）等で統合することを検討してください。
3. **再学習**: 特徴量を削除後、モデルを再学習してLogLossやAUCの変化を確認してください。
