# Stage 1 CatBoost vs LightGBM 比較実験レポート

**実行日時**: 2025-12-22 21:20:35
**実行時間**: 2559.7秒

## 実験設定

| パラメータ | 値 |
|-----------|-----|
| Under-sampling | 1:2 |
| Seeds | 3 |
| Folds | 5 |
| Target Recall | 99% |
| Test Set | 20% |

## 個別モデル結果 (CV OOF)

| モデル | OOF AUC | 閾値 | Recall | フィルタリング率 |
|--------|---------|------|--------|-----------------|
| LightGBM | 0.9033 | 0.0320 | 0.9952 | 18.73% |
| CatBoost | 0.9132 | 0.0300 | 0.9952 | 23.20% |

## OR条件アンサンブル (CV OOF)

| 指標 | 値 |
|------|-----|
| Recall | 0.9980 |
| Precision | 0.0101 |
| フィルタリング率 | 15.60% |

### 正例検出パターン分析

| パターン | 件数 |
|----------|------|
| 両方で検出 | 12,916 |
| LightGBMのみ | 36 |
| CatBoostのみ | 36 |
| 両方見逃し | 26 |

## テストセット結果

| モデル | Recall | フィルタリング率 |
|--------|--------|-----------------|
| LightGBM | 0.9945 | 17.56% |
| CatBoost | 0.9942 | 22.78% |
| OR条件 | 0.9966 | 15.23% |

## モデル間予測相関

| 指標 | 値 |
|------|-----|
| 予測確率の相関係数 | 0.9401 |

> 相関係数が低いほど（例: 0.8-0.9）、モデルが「異なる視点」で予測していることを示し、OR条件アンサンブルの相補効果が期待できます。

## 考察

- **AUC比較**: LightGBM (0.9033) vs CatBoost (0.9132)
- **モデル相関**: 0.9401 → 相補性が高い（異なる視点）
- **相補性**: LightGBMのみで検出=36件, CatBoostのみで検出=36件
- **OR条件の効果**: 
  - Recall 0.9980 を維持
  - フィルタリング効率の変化をCV/Testで確認

## 特徴量重要度

詳細は `feature_importance.csv` を参照してください。

モデル間で重視する特徴量が異なる場合、それがOR条件アンサンブルの有効性を裏付ける証拠となります。
